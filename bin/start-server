#!/usr/bin/env bash
# Start the Rails server directly

# Start PostgreSQL if it's not running
if ! pg_isready -q; then
  echo "Starting PostgreSQL..."
  brew services start postgresql@14
  sleep 3
fi

# Start Redis if it's not running
if ! redis-cli ping > /dev/null 2>&1; then
  echo "Starting Redis..."
  brew services start redis
  sleep 2
fi

# Start the Rails server
echo "Starting Rails server..."
bundle exec rails server "$@"
